"use strict";let shows=[],favs=[];const input=document.querySelector(".js-search__input"),searchButton=document.querySelector(".js-search__button"),showsList=document.querySelector(".js-shows__list"),favsList=document.querySelector(".js-favs__list");function getServerData(t){let s=input.value;t.preventDefault(),fetch(`http://api.tvmaze.com/search/shows?q=${s}`).then(function(t){return t.json()}).then(function(t){shows=t,paintShows(),listenShows()}).catch(function(t){console.log("Error al traer los datos del servidor",t)})}function paintShows(){let t="";for(let s=0;s<shows.length;s++){let e=shows[s].show.name,a=shows[s].show.id,o=shows[s].show.image;t+=`<li class="js-show__item" id=${a}>`,t+=`<h2>${e}</h2>`,t+=`<img src="${o=null===o?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":o.medium}"/>`,t+="</li>"}showsList.innerHTML=t}function listenShows(){const t=document.querySelectorAll(".js-show__item");for(const s of t)s.addEventListener("click",addFav)}function addFav(t){const s=parseInt(t.currentTarget.id),e=shows.find(function(t){return t.show.id===s}),a=favs.find(function(t){return t.show.id===s});e===a?(favs.splice(a,1),console.log("Lo saco",a)):(favs.push(e),console.log(favs)),paintFavs(),setFavData()}function paintFavs(){let t="";for(let s=0;s<favs.length;s++){let e=favs[s].show.name,a=favs[s].show.id,o=favs[s].show.image;t+=`<li class="fav__item js-fav__item" id=${a}>`,t+='<div class="fav__item__header">',t+=`<h2>${e}</h2>`,t+="<p>X</p>",t+="</div>",t+=`<img class="fav__img" src="${o=null===o?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":o.medium}"/>`,t+="</li>"}favsList.innerHTML=t}function setFavData(){localStorage.setItem("favs",JSON.stringify(favs))}function getFavData(){const t=localStorage.getItem("favs"),s=JSON.parse(t);null!==s&&(favs=s,paintFavs())}function listenFavs(){for(const t of favs)t.addEventListener("click",setFavData)}searchButton.addEventListener("click",getServerData),getFavData();